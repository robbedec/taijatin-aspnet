<style>
    .userDiv {
        width: 24%;
        display: inline-block;
        margin-left: 1%;
        margin-bottom: 10px;

        border-radius: 10px;
        padding: 10px;
        background-color: #f8f8f8;
    }

    .userDiv:nth-child(4n + 1) {
        margin-left: 0;
    }

    .userImage {
        width: 100%;
        border-top-left-radius: 10px;
        border-top-right-radius: 10px;
    }

    .userName {
        text-align: center;
        font-weight: bold;
    }
</style>

@model G10_ProjectDotNet.Models.SessionViewModels.IndexViewModel
@{
    ViewData["Title"] = "Session";
}

@if (Model.Session == null)
{
    <h1>Er is momenteel geen sessie bezig</h1>
    <a asp-controller="Session" asp-action="Create" class="btn btn-primary">Sessie starten</a>
}
else
{
    <h1 class="mb-3">Registratie</h1>
    <a asp-controller="Session" asp-action="EndSession" class="btn btn-primary">Sessie beëindigen</a>
    <br>

    @foreach (var member in Model.Members)
    {
        <div class="userDiv">

            @if ((int)@member.Gender == 1)
            {
                <img src="https://wallfar.com/jiu/avatar-male.png" class="userImage">
            }
            else if ((int)@member.Gender == 2)
            {
                <img src="https://wallfar.com/jiu/avatar-female.png" class="userImage">
            }

            <p class="userName">
                @member.UserName (#@member.Id)
            </p>

            @if (!Model.AlreadyRegistered(member.Id))
            {
               <a asp-controller="Course" asp-action="Index" asp-route-memberId="@member.Id" class="btn btn-primary">Lesmateriaal weergeven</a>
            }
            else
            {
                <a asp-controller="Attendance" asp-action="Create" asp-route-memberId=@member.Id class="btn btn-success" style="width:100%;">Registreer aanwezigheid</a>
            }

            @if (ViewContext.HttpContext.User.IsInRole("Teacher") && !Model.AlreadyRegistered(member.Id))
            {
                <a asp-controller="Session" asp-action="RegisterAttendancy" asp-route-memberId=@member.Id class="btn btn-danger">X</a>
            }

        </div>
    }
    <br>
    <a asp-controller="Session" asp-action="EndSession" class="btn btn-primary">Sessie beëindigen</a>

    @section scripts {
        <script asp-src-include="lib/jquery-validation/dist/jquery.validate.js"></script>
        <script asp-src-include="lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.js"></script>
    }
}
